"use strict";

const BOX_SIZE = 3;
const SIZE = BOX_SIZE * BOX_SIZE;

class Sudoku {
  static getBoardFromHtml() {
    let cells = [];
    const rootInput = document.querySelector("#sudokuInput");
    const inputs = rootInput.querySelectorAll("input[type=text]");
    inputs.forEach(input => {
      const x = input.getAttribute("data-x");
      if (cells[x] === undefined) cells[x] = [];
      const y = input.getAttribute("data-y");
      const value = input.value;
      let cell = new Cell(value === "" ? 0 : parseInt(value));
      cells[x][y] = cell;
    });
    return cells;
  }

  static resolve() {
    const cells = Sudoku.getBoardFromHtml();
    this.sudokuSolver = new SudokuSolver(cells);
    const [isResolved, resolvedCells] = this.sudokuSolver.process();
  }
}

class SudokuSolver {
  /** Cell[x][y] */
  constructor(board) {
    this.board = board;
  }

  ac3() {}

  lcv() {}

  mrv() {}

  lineConstraints(row) {
    let constraints = new Set();

    for (let col = 0; col < SIZE; col++) {
      let cell = this.board[col][row];

      if (cell.value !== undefined) {
        constraints.add(cell.value);
      }
    }

    return constraints;
  }

  columnConstraints(col) {
    let constraints = new Set();

    for (let row = 0; row < SIZE; row++) {
      let cell = this.board[col][row];

      if (cell.value !== undefined) {
        constraints.add(cell.value);
      }
    }

    return constraints;
  }

  boxConstraints(col, row) {
    let constraints = new Set();
    let cornerX = col - (col % BOX_SIZE);
    let cornerY = row - (row % BOX_SIZE);

    for (let _col = cornerX; _col < cornerX + BOX_SIZE; _col++) {
      for (let _row = cornerY; _row < cornerY + BOX_SIZE; _row++) {
        let cell = this.board[col][row];

        if (cell.value !== undefined) {
          constraints.add(cell.value);
        }
      }
    }

    return constraints;
  }

  process() {
    const cells = [];
    const isResolved = true; // Algorithme de resolution

    return [isResolved, cells];
  }
}

class Cell {
  ///position: [number, number];
  // if undefined, no value (yet)
  constructor(value) {
    this.value = value;
  }

  removePossibleValue(value) {
    if (this.possibilies.has(value)) {
      this.possibilies.delete(value);
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9TdWRva3VTb2x2ZXIudHMiXSwibmFtZXMiOlsiQk9YX1NJWkUiLCJTSVpFIiwiU3Vkb2t1IiwiZ2V0Qm9hcmRGcm9tSHRtbCIsImNlbGxzIiwicm9vdElucHV0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsIngiLCJnZXRBdHRyaWJ1dGUiLCJ1bmRlZmluZWQiLCJ5IiwidmFsdWUiLCJjZWxsIiwiQ2VsbCIsInBhcnNlSW50IiwicmVzb2x2ZSIsInN1ZG9rdVNvbHZlciIsIlN1ZG9rdVNvbHZlciIsImlzUmVzb2x2ZWQiLCJyZXNvbHZlZENlbGxzIiwicHJvY2VzcyIsImNvbnN0cnVjdG9yIiwiYm9hcmQiLCJhYzMiLCJsY3YiLCJtcnYiLCJsaW5lQ29uc3RyYWludHMiLCJyb3ciLCJjb25zdHJhaW50cyIsIlNldCIsImNvbCIsImFkZCIsImNvbHVtbkNvbnN0cmFpbnRzIiwiYm94Q29uc3RyYWludHMiLCJjb3JuZXJYIiwiY29ybmVyWSIsIl9jb2wiLCJfcm93IiwicmVtb3ZlUG9zc2libGVWYWx1ZSIsInBvc3NpYmlsaWVzIiwiaGFzIiwiZGVsZXRlIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFFBQVEsR0FBRyxDQUFqQjtBQUNBLE1BQU1DLElBQUksR0FBR0QsUUFBUSxHQUFHQSxRQUF4Qjs7QUFFQSxNQUFNRSxNQUFOLENBQWE7QUFHWCxTQUFlQyxnQkFBZixHQUE0QztBQUMxQyxRQUFJQyxLQUFlLEdBQUcsRUFBdEI7QUFDQSxVQUFNQyxTQUFTLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixjQUF2QixDQUFsQjtBQUNBLFVBQU1DLE1BQU0sR0FBR0gsU0FBUyxDQUFDSSxnQkFBVixDQUEyQixrQkFBM0IsQ0FBZjtBQUNBRCxJQUFBQSxNQUFNLENBQUNFLE9BQVAsQ0FBZ0JDLEtBQUQsSUFBNkI7QUFDMUMsWUFBTUMsQ0FBQyxHQUFHRCxL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R0FBR0YsT0FBaEIsRUFBeUJFLElBQUksR0FBR0YsT0FBTyxHQUFHeEMsUUFBMUMsRUFBb0QwQyxJQUFJLEVBQXhELEVBQTREO0FBQzFELFlBQUl6QixJQUFJLEdBQUcsS0FBS1UsS0FBTCxDQUFXUSxHQUFYLEVBQWdCSCxHQUFoQixDQUFYOztBQUNBLFlBQUlmLElBQUksQ0FBQ0QsS0FBTCxLQUFlRixTQUFuQixFQUE4QjtBQUM1Qm1CLFVBQUFBLFdBQVcsQ0FBQ0csR0FBWixDQUFnQm5CLElBQUksQ0FBQ0QsS0FBckI7QUFDRDtBQUNGO0FBQ0Y7O0FBQ0QsV0FBT2lCLFdBQVA7QUFDRDs7QUFFTVIsRUFBQUEsT0FBUCxHQUFzQztBQUNwQyxVQUFNckIsS0FBZSxHQUFHLEVBQXhCO0FBQ0EsVUFBTW1CLFVBQVUsR0FBRyxJQUFuQixDQUZvQyxDQUlwQzs7QUFFQSxXQUFPLENBQUNBLFVBQUQsRUFBYW5CLEtBQWIsQ0FBUDtBQUNEOztBQXZEZ0I7O0FBMERuQixNQUFNYyxJQUFOLENBQVc7QUFDVDtBQUMyQjtBQUczQlEsRUFBQUEsV0FBVyxDQUFDVixLQUFELEVBQWdCO0FBQ3pCLFNBQUtBLEtBQUwsR0FBYUEsS0FBYjtBQUNEOztBQUVEMkIsRUFBQUEsbUJBQW1CLENBQUMzQixLQUFELEVBQWdCO0FBQ2pDLFFBQUksS0FBSzRCLFdBQUwsQ0FBaUJDLEdBQWpCLENBQXFCN0IsS0FBckIsQ0FBSixFQUFpQztBQUMvQixXQUFLNEIsV0FBTCxDQUFpQkUsTUFBakIsQ0FBd0I5QixLQUF4QjtBQUNEO0FBQ0Y7O0FBYlEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBCT1hfU0laRSA9IDM7XG5jb25zdCBTSVpFID0gQk9YX1NJWkUgKiBCT1hfU0laRTtcblxuY2xhc3MgU3Vkb2t1IHtcbiAgc3RhdGljIHN1ZG9rdVNvbHZlcjogU3Vkb2t1U29sdmVyO1xuXG4gIHByaXZhdGUgc3RhdGljIGdldEJvYXJkRnJvbUh0bWwoKTogQ2VsbFtdW10ge1xuICAgIGxldCBjZWxsczogQ2VsbFtdW10gPSBbXTtcbiAgICBjb25zdCByb290SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1ZG9rdUlucHV0XCIpO1xuICAgIGNvbnN0IGlucHV0cyA9IHJvb3RJbnB1dC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbdHlwZT10ZXh0XVwiKTtcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHggPSBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIik7XG4gICAgICBpZiAoY2VsbHNbeF0gPT09IHVuZGVmaW5lZCkgY2VsbHNbeF0gPSBbXTtcbiAgICAgIGNvbnN0IHkgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIik7XG4gICAgICBjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlO1xuICAgICAgbGV0IGNlbGwgPSBuZXcgQ2VsbCh2YWx1ZSA9PT0gXCJcIiA/IDAgOiBwYXJzZUludCh2YWx1ZSkpO1xuICAgICAgY2VsbHNbeF1beV0gPSBjZWxsO1xuICAgIH0pO1xuICAgIHJldHVybiBjZWxscztcbiAgfVxuXG4gIHN0YXRpYyByZXNvbHZlKCkge1xuICAgIGNvbnN0IGNlbGxzID0gU3Vkb2t1LmdldEJvYXJkRnJvbUh0bWwoKTtcbiAgICB0aGlzLnN1ZG9rdVNvbHZlciA9IG5ldyBTdWRva3VTb2x2ZXIoY2VsbHMpO1xuICAgIGNvbnN0IFtpc1Jlc29sdmVkLCByZXNvbHZlZENlbGxzXSA9IHRoaXMuc3Vkb2t1U29sdmVyLnByb2Nlc3MoKTtcbiAgfVxufVxuXG5jbGFzcyBTdWRva3VTb2x2ZXIge1xuICAvKiogQ2VsbFt4XVt5XSAqL1xuICBib2FyZDogQ2VsbFtdW107XG5cbiAgY29uc3RydWN0b3IoYm9hcmQ6IENlbGxbXVtdKSB7XG4gICAgdGhpcy5ib2FyZCA9IGJvYXJkO1xuICB9XG5cbiAgcHJpdmF0ZSBhYzMoKTogdm9pZCB7fVxuICBwcml2YXRlIGxjdigpOiB2b2lkIHt9XG4gIHByaXZhdGUgbXJ2KCk6IHZvaWQge31cblxuICBwcml2YXRlIGxpbmVDb25zdHJhaW50cyhyb3c6IG51bWJlcik6IFNldDxudW1iZXI+IHtcbiAgICBsZXQgY29uc3RyYWludHMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBTSVpFOyBjb2wrKykge1xuICAgICAgbGV0IGNlbGwgPSB0aGlzLmJvYXJkW2NvbF1bcm93XTtcbiAgICAgIGlmIChjZWxsLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3RyYWludHMuYWRkKGNlbGwudmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uc3RyYWludHM7XG4gIH1cbiAgcHJpdmF0ZSBjb2x1bW5Db25zdHJhaW50cyhjb2w6IG51bWJlcik6IFNldDxudW1iZXI+IHtcbiAgICBsZXQgY29uc3RyYWludHMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBTSVpFOyByb3crKykge1xuICAgICAgbGV0IGNlbGwgPSB0aGlzLmJvYXJkW2NvbF1bcm93XTtcbiAgICAgIGlmIChjZWxsLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3RyYWludHMuYWRkKGNlbGwudmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uc3RyYWludHM7XG4gIH1cbiAgcHJpdmF0ZSBib3hDb25zdHJhaW50cyhjb2w6IG51bWJlciwgcm93OiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgbGV0IGNvbnN0cmFpbnRzID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgbGV0IGNvcm5lclggPSBjb2wgLSAoY29sICUgQk9YX1NJWkUpO1xuICAgIGxldCBjb3JuZXJZID0gcm93IC0gKHJvdyAlIEJPWF9TSVpFKTtcblxuICAgIGZvciAobGV0IF9jb2wgPSBjb3JuZXJYOyBfY29sIDwgY29ybmVyWCArIEJPWF9TSVpFOyBfY29sKyspIHtcbiAgICAgIGZvciAobGV0IF9yb3cgPSBjb3JuZXJZOyBfcm93IDwgY29ybmVyWSArIEJPWF9TSVpFOyBfcm93KyspIHtcbiAgICAgICAgbGV0IGNlbGwgPSB0aGlzLmJvYXJkW2NvbF1bcm93XTtcbiAgICAgICAgaWYgKGNlbGwudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0cmFpbnRzLmFkZChjZWxsLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uc3RyYWludHM7XG4gIH1cblxuICBwdWJsaWMgcHJvY2VzcygpOiBbYm9vbGVhbiwgQ2VsbFtdW11dIHtcbiAgICBjb25zdCBjZWxsczogQ2VsbFtdW10gPSBbXTtcbiAgICBjb25zdCBpc1Jlc29sdmVkID0gdHJ1ZTtcblxuICAgIC8vIEFsZ29yaXRobWUgZGUgcmVzb2x1dGlvblxuXG4gICAgcmV0dXJuIFtpc1Jlc29sdmVkLCBjZWxsc107XG4gIH1cbn1cblxuY2xhc3MgQ2VsbCB7XG4gIC8vL3Bvc2l0aW9uOiBbbnVtYmVyLCBudW1iZXJdO1xuICB2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkOyAvLyBpZiB1bmRlZmluZWQsIG5vIHZhbHVlICh5ZXQpXG4gIHBvc3NpYmlsaWVzOiBTZXQ8bnVtYmVyPjtcblxuICBjb25zdHJ1Y3Rvcih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgcmVtb3ZlUG9zc2libGVWYWx1ZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMucG9zc2liaWxpZXMuaGFzKHZhbHVlKSkge1xuICAgICAgdGhpcy5wb3NzaWJpbGllcy5kZWxldGUodmFsdWUpO1xuICAgIH1cbiAgfVxufVxuIl19
